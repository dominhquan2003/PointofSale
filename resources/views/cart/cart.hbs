<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>POS Dash </title>

    <!-- Favicon -->
    <link rel="shortcut icon" href="../../assets/images/favicon.ico" />
    <link rel="stylesheet" href="../assets/css/backend-plugin.min.css">
    <link rel="stylesheet" href="../assets/css/backend.css?v=1.0.0">
    <link rel="stylesheet" href="../assets/vendor/@fortawesome/fontawesome-free/css/all.min.css">

    <link rel="stylesheet" href="../assets/vendor/line-awesome/dist/line-awesome/css/line-awesome.min.css">
    <link rel="stylesheet" href="../assets/vendor/remixicon/fonts/remixicon.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
        integrity="sha512-Avb2QiuDEEvB4bZJYdft2mNjVShBftLdPG8FJ0V7irTLQ8Uo0qcPxh4Plq7G5tGm0rU+1SPhVotteLpBERwTkw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="../assets/css/app.css">
    <style>
        .image {
            position: absolute;
            bottom: auto;
            left: -9px;
            top: -9px;
            border-radius: 50%;
            height: 35px;
            width: 35px;
            text-align: center;
            font-size: 20px;
            line-height: 24px;
            cursor: pointer;
            border: 5px solid #fff;
            background-color: #fff;

        }


        @keyframes bounce {

            0%,
            20%,
            50%,
            80%,
            100% {
                transform: translateY(0);
            }

            40% {
                transform: translateY(-10px);
            }

            60% {
                transform: translateY(-5px);
            }
        }
    </style>

</head>

<body>

    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-header d-flex justify-content-between">
                        <div class="card-body p-0">
                            <div class="iq-edit-list usr-edit">
                                <ul class="iq-edit-profile d-flex nav nav-pills">
                                    <li class="col-md-4 p-0">
                                        <a class="nav-link" href="/">
                                            <img src="../assets/images/logo.png" class="img-fluid rounded-normal"
                                                width="4%" alt="logo">
                                            Back to POSDash
                                        </a>
                                    </li>
                                    <li class="col-md-4 p-0">
                                        <a class="nav-link active" data-toggle="pill" href="#sales">
                                            Sales
                                        </a>
                                    </li>
                                    <li class="col-md-4 p-0">
                                        <a class="nav-link" data-toggle="pill" href="#customer-information">
                                            History Purchase
                                        </a>
                                    </li>


                                    <!-- <li class="col-md-4 p-0" style="right: 0%;">
                                        <a href="/" class="header-logo d-flex align-items-center  ">
                                            <img src="../assets/images/logo.png" class="img-fluid rounded-normal"
                                                width="5%" alt="logo">
                                            <h5 class="logo-title ml-1 mt-2">Back to POSDash</h5>
                                        </a>
                                    </li> -->



                                </ul>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="col-lg-12">
                <div class="iq-edit-list-data">
                    <div class="tab-content">
                        <div class="tab-pane fade active show" id="sales" role="tabpanel">
                            <div class="row">
                                <div class="card col-7 col-md-7">
                                    <div class="card-header d-flex justify-content-between">
                                        <div class="iq-search-bar device-search">
                                            <form action="/cart/search" method="POST" class="searchbox">
                                                <a class="search-link" href="#"><i class="ri-search-line"></i></a>
                                                <input type="text" class="text search-input border-primary"
                                                    placeholder="Search here..." name="barcodeorname">
                                            </form>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="row ">
                                            {{#each products}}
                                            <div class="col-sm-3 col-md-3 col-lg-3">
                                                <div class="card text-center">
                                                    <img src="../assets/images/table/product/{{this.image}}"
                                                        class="card-img-top" alt="#">
                                                    <div class="card-body">
                                                        <h5 class="card-title"
                                                            style="white-space: nowrap;overflow: hidden; text-overflow: ellipsis;">
                                                            {{this.name}}
                                                        </h5>
                                                        <div>
                                                            <p class="card-text formatmoney">
                                                                {{this.retailprice}} <sp>VND</sp>
                                                            </p>
                                                            <small class="card-text mt-1" style="color: red;">
                                                                <span>In stock :</span> {{this.quantity}}
                                                            </small>
                                                        </div>

                                                        <form>
                                                            {{#if this.quantity }}
                                                            <input type="submit" data-id="{{this.id}}"
                                                                class="btn-addCart btn btn-primary"
                                                                value="Add to Cart" />
                                                            {{else}}
                                                            <input type="submit" data-id="{{this.id}}"
                                                                class="btn-addCart btn btn-primary" disabled
                                                                value="Out of stock" />
                                                            {{/if}}
                                                        </form>

                                                    </div>
                                                </div>
                                            </div>
                                            {{/each}}

                                        </div>
                                    </div>
                                </div>
                                <!-- ==================== Customer and Order ==================== -->
                                <div class="col-5 col-md-5  blur-shadow shadow-showcase">
                                    <!-- ==================== Customer ==================== -->
                                    <div class="card">
                                        <div class="modal fade" id="enterCustomerModal" tabindex="-1" role="dialog"
                                            data-dismiss="modal" aria-labelledby="enterCustomerTitle">
                                            <div class="modal-dialog modal-dialog-centered" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="enterCustomerTitle">Customer
                                                        </h5>
                                                        <button type="button" class="close" data-dismiss="modal"
                                                            aria-label="Close">
                                                            <span aria-hidden="true">&times;</span>
                                                        </button>
                                                    </div>
                                                    <form action="/cart/savePurchase" method="post" id="checkForm"
                                                        class="form-horizontal">
                                                        <div class="modal-body">
                                                            <div class="form-group row">
                                                                <label
                                                                    class="control-label col-sm-3 align-self-center">Phone:</label>
                                                                <div class="col-sm-9">
                                                                    <input type="text" class="form-control"
                                                                        id="phone_customer" name="phone_customer"
                                                                        required>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label
                                                                    class="control-label col-sm-3 align-self-center">Name:</label>
                                                                <div class="col-sm-9">
                                                                    <input type="text" class="form-control"
                                                                        id="name_customer" name="name_customer">
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label
                                                                    class="control-label col-sm-3 align-self-center">Address:</label>
                                                                <div class="col-sm-9">
                                                                    <input type="address" class="form-control"
                                                                        id="address_customer" name="address_customer">
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label
                                                                    class="control-label col-sm-3 align-self-center">Cash
                                                                    :</label>
                                                                <div class="col-sm-9">
                                                                    <input type="number" class="form-control"
                                                                        id="payment_customer" name="payment_customer">
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="control-label col-sm-3 align-self-center"
                                                                    for="address">Total :</label>
                                                                <div class="col-sm-9">
                                                                    <input type="text" class="form-control formatmoney"
                                                                        id="total_customer" name="total_customer"
                                                                        readonly>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <div class="col-sm-9">
                                                                    <p style="color: red;" id="paymentErrorMessage">

                                                                    </p>

                                                                </div>

                                                            </div>

                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-secondary"
                                                                data-dismiss="modal">Close</button>

                                                            <!-- <button type="button"
                                                                class="btn btn-primary btn-enter-customer"
                                                                id="btn-enter-customer">Confirm</button> -->
                                                            {{!-- <form action="/cart/cartCustomerInfro"> --}}
                                                                <button type="button" id="moveToHistory"
                                                                    class="btn btn-primary">History Purchase</button>
                                                                {{!--
                                                            </form> --}}

                                                            <button type="button" id="confirmation-information"
                                                                class="btn btn-success">Confirm</button>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                    <!-- ==================== Order ==================== -->

                                    <div class="card">
                                        <div class="card-header">
                                            <h1 class="card-title text-info" style="width: 20%; margin: auto;"> CART
                                            </h1>
                                        </div>
                                        <div class="card-body pl-5">
                                            <div class="table-responsive">
                                                <table class="table" id="cartTable">
                                                    <thead>
                                                        <tr class="bg-info">
                                                            <th>Name</th>
                                                            <th>Quantity</th>
                                                            <th></th>
                                                            <th>Retail Price</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="cartTableBody">



                                                    </tbody>
                                                </table>
                                                {{#if error}}
                                                <div>
                                                    <div colspan="5">
                                                        <div style="width: 100%;">
                                                            <div class="alert alert-danger" role="alert">
                                                                <div class="iq-alert-icon">
                                                                    <i class="ri-information-line"></i>
                                                                </div>
                                                                <div class="iq-alert-text"> <b>Error</b>
                                                                    {{error}}</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                {{/if}}
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>

                        <!-- view History Purchase -->
                        <div class="tab-pane fade " id="customer-information" role="tabpanel">
                            <div class="row">
                                
                                <div class="card col-sm-12 col-lg-12 col-md-12">
                                    <div class="card-header d-flex justify-content-between">
                                        <div class="iq-header-title">
                                            <h4 class="card-title">History Purchase</h4>
                                        </div>
                                    </div>
                                    
                                    <div class="card-body row">
                                        <div class="col-lg-4 col-md-4 col-sm-4">
                                            <div class="form-group row">
                                                <label
                                                    class="control-label col-sm-3 align-self-center">Phone:</label>
                                                <div class="col-sm-9">
                                                    <input type="text" class="form-control" id="phone_customer_purchased"
                                                        name="phone_customer_purchased" required>
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label
                                                    class="control-label col-sm-3 align-self-center">Name:</label>
                                                <div class="col-sm-9">
                                                    <input type="text" class="form-control" id="name_customer_purchased"
                                                        name="name_customer_purchased">
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label
                                                    class="control-label col-sm-3 align-self-center">Address:</label>
                                                <div class="col-sm-9">
                                                    <input type="address" class="form-control"
                                                        id="address_customer_purchased" name="address_customer_purchased">
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <p style="color: red;" id="historyErrorMessage">

                                                </p>
                                            </div>
                                            
                                            

                                        </div>
                                        <div class="col-lg-8 col-md-8 col-sm-8">
                                            <div class="table-responsive rounded mb-3">
                                                <table  class=" table mb-0 tbl-server-info">
                                                    <thead class="bg-white text-uppercase">
                                                        <tr class="ligth ligth-data">
                                                            <th># Index</th>
                                                            <th>Trans-No </th>
                                                            <th>Total Amount <small>VND</small></th>
                                                            <th>Cash <small>VND</small></th>
                                                            <th>Refund <small>VND</small></th>
                                                            <th>Date of Purchase</th>
                                                            <th>Action</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="bodyHistoryPurchaseCustomer" class="ligth-body ">
                                                        <!-- {{#each customers}}
                                                        <tr>
                                                            <td>{{sum @index 1}}</td>
                                                            <td hidden>{{this.Customer.id}}</td>
                                                            <td>{{this.id}}</td>
                                                            <td>{{this.Customer.name}}</td>
                                                            
                                                            <td>{{this.totalprice}}</td>
                                                            <td>{{this.payment}}</td>
                                                            <td>{{this.refund}}</td>
                                                            <td class="dateOfPurchase">{{this.createdAt}}</td>

                                                            <td>
                                                                <div class="d-flex align-items-center list-action">
                                                                    <a type="button"
                                                                        class="btn-personal-information badge badge-info mr-2"
                                                                        data-name="{{this.Customer.name}}"
                                                                        data-phone="{{this.Customer.phone}}"
                                                                        data-address="{{this.Customer.address}}"
                                                                        data-id="{{this.Customer.id}}"
                                                                        data-toggle="modal" data-placement="top">
                                                                        <i class="ri-eye-line mr-0"></i>
                                                                    </a>

                                                                    <a type="button"
                                                                        class="btn-orderdetail-information badge badge-warning mr-2"
                                                                        data-id="{{this.id}}" data-toggle="modal"
                                                                        data-placement="top">
                                                                        <i class="fa-solid fa-receipt"></i>
                                                                    </a>


                                                                </div>
                                                            </td>
                                                        </tr>
                                                        {{/each}} -->
                                                    </tbody>
                                                </table>
                                            </div>

                                        </div>

                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="modal fade" id="informationCustomerModal" tabindex="-1" role="dialog" data-dismiss="modal"
        aria-labelledby="enterCustomerTitle">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="enterCustomerTitle">Personal information </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body">
                    <div class="form-group row">
                        <label class="control-label col-sm-3 align-self-center">ID:</label>
                        <div class="col-sm-9">
                            <input type="text" class="form-control" id="id_customer_order" name="id_customer_order"
                                readonly>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-sm-3 align-self-center">Name:</label>
                        <div class="col-sm-9">
                            <input type="text" class="form-control" id="name_customer_order" name="name_customer_order"
                                readonly>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-sm-3 align-self-center">Phone:</label>
                        <div class="col-sm-9">
                            <input type="text" class="form-control" id="phone_customer_order"
                                name="phone_customer_order" readonly>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-sm-3 align-self-center">Address:</label>
                        <div class="col-sm-9">
                            <input type="address" class="form-control" id="address_customer_order"
                                name="address_customer_order" readonly>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>


                </div>

            </div>
        </div>
    </div>


    <div class="modal fade" id="informationOrderdetailModal" tabindex="-1" role="dialog" data-dismiss="modal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="enterCustomerTitle">Order detail information </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="table-responsive-sm">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th class="text-center black" scope="col">#Index</th>
                                            <th scope="col" class="black">Order detail ID</th>
                                            <th>Image</th>
                                            <th class="text-center black" scope="col">Quantity</th>
                                            <th class="text-center black" scope="col">Retail price</th>
                                            <th class="text-center black" scope="col">Subtotal</th>
                                        </tr>
                                    </thead>
                                    <tbody id="body-orderdetail">


                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary " data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>

    <script src="../assets/js/backend-bundle.min.js"></script>
    <script src="../assets/js/table-treeview.js"></script>
    <script src="../assets/js/customizer.js"></script>
    <script async src="../assets/js/chart-custom.js"></script>
    <script src="../assets/js/app.js"></script>
    <script src="../assets/js/cart.js"></script>
    <script src="../assets/js/purchasehistory.js"></script>

</body>

</html>